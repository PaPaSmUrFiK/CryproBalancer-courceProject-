<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.Cursor?>
<?import javafx.scene.chart.LineChart?>
<?import javafx.scene.chart.NumberAxis?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.ComboBox?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.ListView?>
<?import javafx.scene.control.RadioButton?>
<?import javafx.scene.control.TableColumn?>
<?import javafx.scene.control.TableView?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.control.ToggleGroup?>
<?import javafx.scene.image.Image?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.layout.AnchorPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.Pane?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.text.Font?>

<AnchorPane prefHeight="600.0" prefWidth="800.0" style="-fx-background-color: #C7AA8B;" xmlns="http://javafx.com/javafx/23.0.1" xmlns:fx="http://javafx.com/fxml/1" fx:controller="cryptoBalancer.MainLayout">
   <children>
      <!-- Верхняя панель -->
      <Pane prefHeight="108.0" prefWidth="800.0" style="-fx-background-color: #323232;">
         <children>
            <ImageView fitHeight="128.0" fitWidth="142.0" layoutX="50.0" pickOnBounds="true" preserveRatio="true">
               <image>
                  <Image url="@../images/fun-bird-3d-illustration-Photoroom.png" />
               </image>
            </ImageView>
            <Label fx:id="headerLabel" layoutX="193.0" layoutY="28.0" prefHeight="53.0" prefWidth="600.0" style="-fx-font-size: 30px; -fx-text-fill: #ededed; -fx-font-weight: bold;" text="ДОБРО ПОЖАЛОВАТЬ, USERNAME">
               <font>
                  <Font name="Imprint MT Shadow" size="36.0" />
               </font>
            </Label>
         </children>
      </Pane>

      <!-- Боковая панель -->
      <VBox layoutY="108.0" prefHeight="492.0" prefWidth="150.0" style="-fx-background-color: #323232;" AnchorPane.bottomAnchor="0.0" AnchorPane.leftAnchor="0.0" AnchorPane.topAnchor="108.0">
         <children>
            <Button fx:id="btnNews" mnemonicParsing="false" onAction="#switchToNews" prefHeight="40.0" prefWidth="150.0" style="-fx-background-color: #ECE0C3; -fx-border-color: #CA9345; -fx-border-radius: 10; -fx-border-width: 3; -fx-background-radius: 15; -fx-background-insets: 1,2,3;" text="Новости">
               <cursor>
                  <Cursor fx:constant="HAND" />
               </cursor>
               <font>
                  <Font size="13.0" />
               </font>
            </Button>
            <Button fx:id="btnPersonal" mnemonicParsing="false" onAction="#switchToPersonal" prefHeight="40.0" prefWidth="150.0" style="-fx-background-color: #ECE0C3; -fx-border-color: #CA9345; -fx-border-radius: 10; -fx-border-width: 3; -fx-background-radius: 15; -fx-background-insets: 1,2,3;" text="Личный кабинет">
               <cursor>
                  <Cursor fx:constant="HAND" />
               </cursor>
               <font>
                  <Font size="13.0" />
               </font>
            </Button>
            <Button fx:id="btnPortfolio" mnemonicParsing="false" onAction="#switchToPortfolio" prefHeight="40.0" prefWidth="150.0" style="-fx-background-color: #ECE0C3; -fx-border-color: #CA9345; -fx-border-radius: 10; -fx-border-width: 3; -fx-background-radius: 15; -fx-background-insets: 1,2,3;" text="Управление портфелем">
               <cursor>
                  <Cursor fx:constant="HAND" />
               </cursor>
               <font>
                  <Font size="13.0" />
               </font>
            </Button>
            <Button fx:id="btnCryptoData" mnemonicParsing="false" onAction="#switchToCryptoData" prefHeight="40.0" prefWidth="150.0" style="-fx-background-color: #ECE0C3; -fx-border-color: #CA9345; -fx-border-radius: 10; -fx-border-width: 3; -fx-background-radius: 15; -fx-background-insets: 1,2,3;" text="Данные криптовалюты">
               <cursor>
                  <Cursor fx:constant="HAND" />
               </cursor>
               <font>
                  <Font size="13.0" />
               </font>
            </Button>
            <Button fx:id="btnAdmin" mnemonicParsing="false" onAction="#switchToAdmin" prefHeight="40.0" prefWidth="150.0" style="-fx-background-color: #ECE0C3; -fx-border-color: #CA9345; -fx-border-radius: 10; -fx-border-width: 3; -fx-background-radius: 15; -fx-background-insets: 1,2,3;" text="Администрирование" visible="false">
               <cursor>
                  <Cursor fx:constant="HAND" />
               </cursor>
               <font>
                  <Font size="13.0" />
               </font>
            </Button>
         </children>
      </VBox>

      <!-- Центральная область -->
      <Pane layoutX="150.0" layoutY="108.0" prefHeight="613.0" prefWidth="650.0" style="-fx-background-color: #ECF0F1;">
         <children>
            <!-- Панель для новостей -->
            <AnchorPane fx:id="newsPane" visible="false">
               <children>
                  <ListView fx:id="newsList" layoutX="19.0" layoutY="20.0" prefHeight="522.0" prefWidth="610" />
               </children>
            </AnchorPane>

            <!-- Панель для личного кабинета -->
            <AnchorPane fx:id="personalPane" prefHeight="560.0" prefWidth="650.0" visible="false">
               <children>
                  <ImageView fitHeight="114.0" fitWidth="104.0" layoutX="14.0" layoutY="14.0">
                     <image>
                        <Image url="@../images/the_boss.jpg" />
                     </image>
                  </ImageView>
                  <Label fx:id="usernameLabel" layoutX="136.0" layoutY="52.0" text="Имя пользователя: [Имя]" textFill="#d1ab43">
                     <font>
                        <Font name="Segoe UI Bold" size="30.0" />
                     </font>
                  </Label>
                  <Label fx:id="emailLabel" layoutX="20.0" layoutY="175.0" text="Email: [***.***@***.***]">
                     <font>
                        <Font name="Segoe UI Bold" size="18.0" />
                     </font>
                  </Label>
                  <Label fx:id="portfolioCountLabel" layoutX="20.0" layoutY="205.0" text="Количество портфелей: [0]">
                     <font>
                        <Font name="Segoe UI Bold" size="18.0" />
                     </font>
                  </Label>
                  <Label fx:id="roleLabel" layoutX="20.0" layoutY="235.0" text="Роль: [Роль]">
                     <font>
                        <Font name="Segoe UI Bold" size="18.0" />
                     </font>
                  </Label>
                  <Button fx:id="changePasswordButton" layoutX="21.0" layoutY="280.0" onAction="#changePassword" prefHeight="34.0" prefWidth="150.0" style="-fx-background-color: #4A90E2; -fx-border-color: #2C3E50; -fx-border-radius: 15; -fx-border-width: 1; -fx-background-radius: 15; -fx-background-insets: 1,2,3; -fx-text-fill: #FFFFFF;" text="Сменить пароль">
                     <cursor>
                        <Cursor fx:constant="HAND" />
                     </cursor>
                     <font>
                        <Font size="13.0" />
                     </font>
                  </Button>
               </children>
            </AnchorPane>

            <!-- Панель для управления портфелем -->
            <AnchorPane fx:id="portfolioPane" visible="true">
               <children>
                  <VBox prefWidth="600.0" spacing="15">
                     <AnchorPane.leftAnchor>20.0</AnchorPane.leftAnchor>
                     <AnchorPane.rightAnchor>20.0</AnchorPane.rightAnchor>
                     <AnchorPane.topAnchor>20.0</AnchorPane.topAnchor>
                     <AnchorPane.bottomAnchor>20.0</AnchorPane.bottomAnchor>

                     <HBox spacing="10">
                        <ComboBox fx:id="portfolioComboBox" onAction="#selectPortfolio" prefWidth="200.0" promptText="Выберите портфель" style="-fx-background-radius: 15;" />
                        <Button fx:id="addPortfolioButton" onAction="#addPortfolio" prefHeight="34.0" prefWidth="120.0" style="-fx-background-color: #4A90E2; -fx-border-color: #2C3E50; -fx-border-radius: 15; -fx-border-width: 1; -fx-background-radius: 15; -fx-background-insets: 1,2,3; -fx-text-fill: #FFFFFF;" text="Добавить портфель">
                           <cursor>
                              <Cursor fx:constant="HAND" />
                           </cursor>
                           <font>
                              <Font size="13.0" />
                           </font>
                        </Button>
                        <Button fx:id="deletePortfolioButton" disable="true" onAction="#deletePortfolio" prefHeight="34.0" prefWidth="120.0" style="-fx-background-color: #4A90E2; -fx-border-color: #2C3E50; -fx-border-radius: 15; -fx-border-width: 1; -fx-background-radius: 15; -fx-background-insets: 1,2,3; -fx-text-fill: #FFFFFF;" text="Удалить портфель">
                           <cursor>
                              <Cursor fx:constant="HAND" />
                           </cursor>
                           <font>
                              <Font size="13.0" />
                           </font>
                        </Button>
                        <Button fx:id="analyzePortfolioButton" disable="true" onAction="#analyzePortfolio" prefHeight="34.0" prefWidth="120.0" style="-fx-background-color: #4A90E2; -fx-border-color: #2C3E50; -fx-border-radius: 15; -fx-border-width: 1; -fx-background-radius: 15; -fx-background-insets: 1,2,3; -fx-text-fill: #FFFFFF;" text="Просмотреть анализ">
                           <cursor>
                              <Cursor fx:constant="HAND" />
                           </cursor>
                           <font>
                              <Font size="13.0" />
                           </font>
                        </Button>
                     </HBox>
                     <HBox spacing="320.0">
                        <Button fx:id="savePortfolioButton" disable="true" onAction="#savePortfolio" prefHeight="34.0" prefWidth="150.0" style="-fx-background-color: #4A90E2; -fx-border-color: #2C3E50; -fx-border-radius: 15; -fx-border-width: 1; -fx-background-radius: 15; -fx-background-insets: 1,2,3; -fx-text-fill: #FFFFFF;" text="Сохранить">
                           <cursor>
                              <Cursor fx:constant="HAND" />
                           </cursor>
                           <font>
                              <Font size="13.0" />
                           </font>
                        </Button>
                        <Button fx:id="createReport" disable="true" onAction="#createReport" prefHeight="34.0" prefWidth="120.0" style="-fx-background-color: #4A90E2; -fx-border-color: #2C3E50; -fx-border-radius: 15; -fx-border-width: 1; -fx-background-radius: 15; -fx-background-insets: 1,2,3; -fx-text-fill: #FFFFFF;" text="Создать отчёт" >
                           <cursor>
                              <Cursor fx:constant="HAND" />
                           </cursor>
                           <font>
                              <Font size="13.0" />
                           </font>
                        </Button>
                     </HBox>
                     <Label style="-fx-font-size: 14px; -fx-text-fill: #2C3E50;" text="Криптовалюты в портфеле:" />
                     <ListView fx:id="cryptoListView" prefHeight="200.0" prefWidth="600.0" />
                     <HBox spacing="10">
                        <Label style="-fx-font-size: 14px; -fx-text-fill: #2C3E50;" text="Добавить криптовалюту:" />
                        <ComboBox fx:id="cryptoPortfolioComboBox" onAction="#selectCryptoInPotrfolio" prefWidth="200.0" promptText="Выберите криптовалюту" style="-fx-background-radius: 15;" />
                        <Button fx:id="addCryptoButton" disable="true" onAction="#addCryptoToPortfolio" prefHeight="34.0" prefWidth="120.0" style="-fx-background-color: #4A90E2; -fx-border-color: #2C3E50; -fx-border-radius: 15; -fx-border-width: 1; -fx-background-radius: 15; -fx-background-insets: 1,2,3; -fx-text-fill: #FFFFFF;" text="Добавить">
                           <cursor>
                              <Cursor fx:constant="HAND" />
                           </cursor>
                           <font>
                              <Font size="13.0" />
                           </font>
                        </Button>
                     </HBox>
                     <LineChart fx:id="portfolioChart" prefHeight="200.0" prefWidth="600.0" title="Доходность портфеля" visible="false">
                        <xAxis>
                           <NumberAxis label="Дни" />
                        </xAxis>
                        <yAxis>
                           <NumberAxis label="Доходность (%)" />
                        </yAxis>
                     </LineChart>
                     <Label fx:id="optimizationLabel" prefWidth="600.0" text="Данные оптимизации недоступны" visible="false" wrapText="true" />
                  </VBox>
               </children>
            </AnchorPane>

            <!-- Панель для данных криптовалюты -->
            <AnchorPane fx:id="cryptoDataPane" visible="false">
               <children>
                  <ComboBox fx:id="cryptoComboBox" onAction="#selectCrypto" prefWidth="200.0" promptText="Select a cryptocurrency" style="-fx-background-radius: 15;">
                     <AnchorPane.leftAnchor>20.0</AnchorPane.leftAnchor>
                     <AnchorPane.topAnchor>20.0</AnchorPane.topAnchor>
                  </ComboBox>
                  <LineChart fx:id="priceChart" title="Price History">
                     <xAxis>
                        <NumberAxis label="Даты" />
                     </xAxis>
                     <yAxis>
                        <NumberAxis label="Цена (USD)" />
                     </yAxis>
                     <AnchorPane.leftAnchor>20.0</AnchorPane.leftAnchor>
                     <AnchorPane.topAnchor>60.0</AnchorPane.topAnchor>
                     <AnchorPane.rightAnchor>20.0</AnchorPane.rightAnchor>
                     <AnchorPane.bottomAnchor>100.0</AnchorPane.bottomAnchor>
                  </LineChart>
                  <Label fx:id="cryptoInfoLabel" style="-fx-font-size: 14px;" text="Select a cryptocurrency to view details.">
                     <AnchorPane.leftAnchor>20.0</AnchorPane.leftAnchor>
                     <AnchorPane.bottomAnchor>20.0</AnchorPane.bottomAnchor>
                  </Label>
               </children>
            </AnchorPane>

            <!-- Панель для технического управления -->
            <AnchorPane fx:id="adminPane" prefHeight="672.0" prefWidth="630.0" visible="false">
               <children>
                  <!-- Поиск пользователей -->
                  <TextField fx:id="searchUserField" layoutX="20.0" layoutY="40.0" prefWidth="200.0" promptText="Поиск по логину или email" style="-fx-background-radius: 15;" />
                  <HBox layoutX="240.0" layoutY="40.0" spacing="10">
                     <children>
                        <RadioButton fx:id="filterAll" selected="true" text="Все">
                           <toggleGroup>
                              <ToggleGroup fx:id="roleFilterGroup" />
                           </toggleGroup>
                        </RadioButton>
                        <RadioButton fx:id="filterAdmins" text="Администраторы" toggleGroup="$roleFilterGroup" />
                        <RadioButton fx:id="filterUsers" text="Пользователи" toggleGroup="$roleFilterGroup" />
                     </children>
                  </HBox>
                  <!-- Таблица пользователей -->
                  <TableView fx:id="usersTable" layoutX="20.0" layoutY="80.0" prefHeight="200.0" prefWidth="610.0">
                     <columns>
                        <TableColumn fx:id="usernameColumn" prefWidth="120.0" text="Логин" />
                        <TableColumn fx:id="emailColumn" prefWidth="150.0" text="Email" />
                        <TableColumn fx:id="roleColumn" prefWidth="100.0" text="Роль" />
                     </columns>
                  </TableView>
                  <!-- Кнопки управления пользователями -->
                  <HBox layoutX="20.0" layoutY="290.0" spacing="10">
                     <children>
                        <Button fx:id="deleteUserButton" onAction="#deleteUser" prefHeight="34.0" prefWidth="120.0" style="-fx-background-color: #4A90E2; -fx-border-color: #2C3E50; -fx-border-radius: 15; -fx-border-width: 1; -fx-background-radius: 15; -fx-background-insets: 1,2,3; -fx-text-fill: #FFFFFF;" text="Удалить">
                           <cursor>
                              <Cursor fx:constant="HAND" />
                           </cursor>
                           <font>
                              <Font size="13.0" />
                           </font>
                        </Button>
                        <Button fx:id="makeAdminButton" onAction="#makeAdmin" prefHeight="34.0" prefWidth="120.0" style="-fx-background-color: #4A90E2; -fx-border-color: #2C3E50; -fx-border-radius: 15; -fx-border-width: 1; -fx-background-radius: 15; -fx-background-insets: 1,2,3; -fx-text-fill: #FFFFFF;" text="Назначить админом">
                           <cursor>
                              <Cursor fx:constant="HAND" />
                           </cursor>
                           <font>
                              <Font size="13.0" />
                           </font>
                        </Button>
                        <Button fx:id="editUserButton" onAction="#editUser" prefHeight="34.0" prefWidth="120.0" style="-fx-background-color: #4A90E2; -fx-border-color: #2C3E50; -fx-border-radius: 15; -fx-border-width: 1; -fx-background-radius: 15; -fx-background-insets: 1,2,3; -fx-text-fill: #FFFFFF;" text="Редактировать">
                           <cursor>
                              <Cursor fx:constant="HAND" />
                           </cursor>
                           <font>
                              <Font size="13.0" />
                           </font>
                        </Button>
                     </children>
                  </HBox>
                  <!-- Поиск криптовалют -->
                  <TextField fx:id="searchCryptoField" layoutX="20.0" layoutY="330.0" prefWidth="200.0" promptText="Поиск по названию или символу" style="-fx-background-radius: 15;" />
                  <!-- Таблица криптовалют -->
                  <TableView fx:id="cryptosTable" layoutX="20.0" layoutY="370.0" prefHeight="200.0" prefWidth="610.0">
                     <columns>
                        <TableColumn fx:id="cryptoNameColumn" prefWidth="150.0" text="Название" />
                        <TableColumn fx:id="cryptoSymbolColumn" prefWidth="100.0" text="Символ" />
                        <TableColumn fx:id="cryptoPriceColumn" prefWidth="100.0" text="Цена (USD)" />
                        <TableColumn fx:id="cryptoDateColumn" prefWidth="120.0" text="Дата обновления" />
                     </columns>
                  </TableView>
               </children>
            </AnchorPane>
         </children>
      </Pane>
   </children>
</AnchorPane>
